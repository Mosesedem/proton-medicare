[2025-03-13T15:21:44.017Z] Received webhook payload {"event":"purchase.successful","data":{"id":"7ea18c79-2efc-403a-8c20-a47e1a0b3fa8","app_mode":"test","amount":3500,"status":"successful","reference":"9c29034e-96f8-4364-ac41-45dcc8147069","meta":{"policy":{"id":"7ea18c79-2efc-403a-8c20-a47e1a0b3fa8","dob":"2025-02-24","meta":{"payload":{"plan_id":"37","customer":{"dob":"2025-02-24","city":1,"phone":"09030465501","state":1,"gender":"Male","address":"My residential address","country":164,"lastName":"Edemqq","relation":"Self","firstName":"Mosesqq","maritalStatus":1},"policyId":"2058","reference":"ZUEIIBMPZH"},"id_image":"https://seller.rest/uploads/197198930f1c2c505826bc1e.png","id_card_url":"https://s3.eu-west-2.amazonaws.com/mycover.ai/39efcaf4-4e81-4536-8c72-1a4ebfa1996c-Mosesqq","mca_payload":{"meta":{"user":{"id":"cm7sfoimm0000sb2a8wqc8nqp"},"user_id":"cm7sfoimm0000sb2a8wqc8nqp","enrollment_id":88},"email":"mosesedem81@gmail.com","gender":"Male","image_url":"https://seller.rest/uploads/197198930f1c2c505826bc1e.png","last_name":"Edemqq","first_name":"Mosesqq","product_id":"7b6f82a3-c4bc-446d-9b81-4fa0849a1de1","payment_plan":1,"phone_number":"09030465501","date_of_birth":"2025-02-24","marital_status":"Single"},"payment_plan":1,"hmo_policy_id":"100007179","provider_expiry":"2025-05-08 23:59:59","hospital_list_url":"https://mycover.ai/hmo-hospitals?q=bastion-zencare","provider_policy_id":"2058"},"email":"mosesedem81@gmail.com","phone":"09030465501","active":true,"profit":3500,"history":null,"app_mode":"test","buyer_id":"b65bc191-5315-42d7-91cc-2fee60d98008","dividend":{"mcaTotalShare":2940,"providerShare":3500,"distributorShare":560,"mcaMarkedupShare":3500,"providerGwpShare":3500,"mcaCommissionShare":0},"last_name":"Edemqq","created_at":"2025-03-13T12:38:34.201Z","deleted_at":null,"first_name":"Mosesqq","product_id":"7b6f82a3-c4bc-446d-9b81-4fa0849a1de1","start_date":"2025-03-13T00:38:34.000Z","updated_at":"2025-03-13T12:38:34.680Z","customer_id":"b65bc191-5315-42d7-91cc-2fee60d98008","provider_id":"04e7e852-0c80-4c62-8a24-c5f4a5e5c6d6","purchase_id":"08a36340-5fce-4a77-88d1-75c5ea01f345","genius_price":7000,"market_price":3500,"renewal_date":null,"distributor_id":"22050559-5ada-4f5d-b1ac-75c5f7ad2d3b","activation_date":"2025-03-13T00:38:34.000Z","expiration_date":"2025-04-13T00:38:34.000Z","product_category_id":"9d78bc79-3fa8-447d-b688-e42c1c6838a0","submitted_to_provider":true}},"customer":{"id":"b65bc191-5315-42d7-91cc-2fee60d98008","first_name":"Mosesqq","last_name":"Edemqq","email":"mosesedem81@gmail.com","phone":"09030465501"},"product_id":"7b6f82a3-c4bc-446d-9b81-4fa0849a1de1","created_at":"2025-03-13T12:38:34.201Z","updated_at":"2025-03-13T12:38:34.680Z","policy_expiry_date":"2025-04-13T00:38:34.000Z"}}
[2025-03-13T15:21:46.705Z] Updating existing health plan {"enrollmentId":88,"userId":"cm7sfoimm0000sb2a8wqc8nqp"}
[2025-03-13T15:21:46.953Z] Error processing webhook {"error":"\nInvalid `prisma.healthPlan.update()` invocation:\n\n{\n  where: {\n    id: \"cm87c4sbu0005sbkgoxgwed26\"\n  },\n  data: {\n    firstName: \"Mosesqq\",\n    lastName: \"Edemqq\",\n    email: \"mosesedem81@gmail.com\",\n    phone: \"09030465501\",\n    planId: \"37\",\n    status: \"active\",\n    startDate: new Date(\"2025-03-13T00:38:34.000Z\"),\n    endDate: new Date(\"2025-04-13T00:38:34.000Z\"),\n    expirationDate: new Date(\"2025-04-13T00:38:34.000Z\"),\n    activationDate: new Date(\"2025-03-13T00:38:34.000Z\"),\n    imagePath: \"https://seller.rest/uploads/197198930f1c2c505826bc1e.png\",\n    hospitalListUrl: \"https://mycover.ai/hmo-hospitals?q=bastion-zencare\",\n    updatedAt: new Date(\"2025-03-13T12:38:34.680Z\"),\n    myCoverPolicyId: \"7ea18c79-2efc-403a-8c20-a47e1a0b3fa8\",\n    appMode: \"test\",\n    amount: 3500,\n    providerPolicyId: \"2058\",\n                      ~~~~~~\n    dob: new Date(\"2025-02-24T00:00:00.000Z\"),\n    address: \"My residential address\",\n    groupId: null,\n    genderId: 1,\n    dataConsent: true,\n    idCardUrl: \"https://s3.eu-west-2.amazonaws.com/mycover.ai/39efcaf4-4e81-4536-8c72-1a4ebfa1996c-Mosesqq\",\n    productId: \"7b6f82a3-c4bc-446d-9b81-4fa0849a1de1\",\n    paymentPlan: 1,\n    profit: 3500,\n    buyerId: \"b65bc191-5315-42d7-91cc-2fee60d98008\",\n    distributorId: \"22050559-5ada-4f5d-b1ac-75c5f7ad2d3b\",\n    providerId: \"04e7e852-0c80-4c62-8a24-c5f4a5e5c6d6\",\n    purchaseId: \"08a36340-5fce-4a77-88d1-75c5ea01f345\",\n    geniusPrice: 7000,\n    marketPrice: 3500,\n    myCoverReferenceId: \"9c29034e-96f8-4364-ac41-45dcc8147069\"\n  }\n}\n\nArgument `providerPolicyId`: Invalid value provided. Expected Int, NullableIntFieldUpdateOperationsInput or Null, provided String.","stack":"PrismaClientValidationError: \nInvalid `prisma.healthPlan.update()` invocation:\n\n{\n  where: {\n    id: \"cm87c4sbu0005sbkgoxgwed26\"\n  },\n  data: {\n    firstName: \"Mosesqq\",\n    lastName: \"Edemqq\",\n    email: \"mosesedem81@gmail.com\",\n    phone: \"09030465501\",\n    planId: \"37\",\n    status: \"active\",\n    startDate: new Date(\"2025-03-13T00:38:34.000Z\"),\n    endDate: new Date(\"2025-04-13T00:38:34.000Z\"),\n    expirationDate: new Date(\"2025-04-13T00:38:34.000Z\"),\n    activationDate: new Date(\"2025-03-13T00:38:34.000Z\"),\n    imagePath: \"https://seller.rest/uploads/197198930f1c2c505826bc1e.png\",\n    hospitalListUrl: \"https://mycover.ai/hmo-hospitals?q=bastion-zencare\",\n    updatedAt: new Date(\"2025-03-13T12:38:34.680Z\"),\n    myCoverPolicyId: \"7ea18c79-2efc-403a-8c20-a47e1a0b3fa8\",\n    appMode: \"test\",\n    amount: 3500,\n    providerPolicyId: \"2058\",\n                      ~~~~~~\n    dob: new Date(\"2025-02-24T00:00:00.000Z\"),\n    address: \"My residential address\",\n    groupId: null,\n    genderId: 1,\n    dataConsent: true,\n    idCardUrl: \"https://s3.eu-west-2.amazonaws.com/mycover.ai/39efcaf4-4e81-4536-8c72-1a4ebfa1996c-Mosesqq\",\n    productId: \"7b6f82a3-c4bc-446d-9b81-4fa0849a1de1\",\n    paymentPlan: 1,\n    profit: 3500,\n    buyerId: \"b65bc191-5315-42d7-91cc-2fee60d98008\",\n    distributorId: \"22050559-5ada-4f5d-b1ac-75c5f7ad2d3b\",\n    providerId: \"04e7e852-0c80-4c62-8a24-c5f4a5e5c6d6\",\n    purchaseId: \"08a36340-5fce-4a77-88d1-75c5ea01f345\",\n    geniusPrice: 7000,\n    marketPrice: 3500,\n    myCoverReferenceId: \"9c29034e-96f8-4364-ac41-45dcc8147069\"\n  }\n}\n\nArgument `providerPolicyId`: Invalid value provided. Expected Int, NullableIntFieldUpdateOperationsInput or Null, provided String.\n    at xn (/Users/Moses/Documents/proton-medicare/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at Bn.handleRequestError (/Users/Moses/Documents/proton-medicare/node_modules/@prisma/client/runtime/library.js:121:7005)\n    at Bn.handleAndLogRequestError (/Users/Moses/Documents/proton-medicare/node_modules/@prisma/client/runtime/library.js:121:6686)\n    at Bn.request (/Users/Moses/Documents/proton-medicare/node_modules/@prisma/client/runtime/library.js:121:6393)\n    at async l (/Users/Moses/Documents/proton-medicare/node_modules/@prisma/client/runtime/library.js:130:9645)\n    at async eval (webpack-internal:///(rsc)/./app/api/webhook/mycover/route.ts:151:43)\n    at async Proxy._transactionWithCallback (/Users/Moses/Documents/proton-medicare/node_modules/@prisma/client/runtime/library.js:130:8012)\n    at async POST (webpack-internal:///(rsc)/./app/api/webhook/mycover/route.ts:84:24)\n    at async AppRouteRouteModule.do (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:10:32847)\n    at async AppRouteRouteModule.handle (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:10:39868)\n    at async doRender (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/server/base-server.js:1452:42)\n    at async responseGenerator (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/server/base-server.js:1822:28)\n    at async DevServer.renderToResponseWithComponentsImpl (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/server/base-server.js:1832:28)\n    at async DevServer.renderPageComponent (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/server/base-server.js:2259:24)\n    at async DevServer.renderToResponseImpl (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/server/base-server.js:2297:32)\n    at async DevServer.pipeImpl (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/server/base-server.js:959:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/server/next-server.js:281:17)\n    at async DevServer.handleRequestImpl (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/server/base-server.js:853:17)\n    at async /Users/Moses/Documents/proton-medicare/node_modules/next/dist/server/dev/next-dev-server.js:371:20\n    at async Span.traceAsyncFn (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/trace/trace.js:153:20)\n    at async DevServer.handleRequest (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/server/dev/next-dev-server.js:368:24)\n    at async invokeRender (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/server/lib/router-server.js:230:21)\n    at async handleRequest (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/server/lib/router-server.js:408:24)\n    at async requestHandlerImpl (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/server/lib/router-server.js:432:13)\n    at async Server.requestListener (/Users/Moses/Documents/proton-medicare/node_modules/next/dist/server/lib/start-server.js:146:13)"}
